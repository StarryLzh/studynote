# Vim 操作



---



## 一、模式	

1. 正常模式：浏览或者从宏观上处理文本
2. 编辑模式：逐字添加和修改文本
3. 命令行模式：保存退出、搜索等



---



## 二、新建，保存和退出

打开文件：`vim 文件名`，若文件不存在就会创建文件；

创建`ab.c`的c文件： `vim ab.c`

* `i` ：编辑模式
* `esc`：正常模式
* `:`：命令行模式
* `:q`：仅退出(quit)
* `:q!`：**不保存退出**
* `:wq`：保存退出(write quit)



---



## 三、初步：导航与编辑

### 1、移动光标

左上下右： `H J K L` ,` J = JACK` ,`K=KING` ; 

### 2、编辑

* ` i = insert `插入到**光标左侧**;
* `a = append`添加或者附加到**光标的右侧**;
*  相应插入到**最前面**：`I 或者 shift+i`
* 相应添加到**最后面**：`A 或者 shift+a`
* **新增下一行**并且**编辑**：`o(小写)`
* **新增上一行**并且**编辑**：`O(大写) 或者 shift+o`



---



## 四、升级：导航与编辑

### 1、显示行号

`vim --version`- 找到 `user vimre file:"$HOME/.vimrc"`

打开` vim $HOME/.vimrc`: **在最后一行添加**` set number`

* `G` ：光标到最后一行； 一般与 `o`一起使用，即到**在最后一行添加** 
* `gg` ：光标到第一行；
* `行号+G`：跳跃到指定行号

 ### 2、显示相对行号

相对行号：便于当前光标移动到相对位置

打开` vim $HOME/.vimrc`: 在最后一行添加` set relativenumber`

* 向下移动5行：`5j` 或`:5`

* 向上移动4行：`4k`

### 3、编辑

* `yy`：即`yank` 复制的意思，**复制当前行** 

* `p`：即`paste`，**粘贴**

* `dd`：即`delete`，在正常模式**删除当前行**

* `.`：英语句号，**重复上次的操作**

* `u` ：即`undo`,**撤回上一次操作**

* `ctrl + r` ：**恢复上一次操作**

* `dw`：即`delete a word`，**删除**当前光标的**字符** 

  不过`dw`后，需要重新进入编辑模式再输入字符

* `cw`：即`change a word`**改变字符并且进入编辑模式**，很适合单处修改

* `w`：即`word`，移动到**下一个单词首部**

* `e`：即`end`，下一个单词尾部

* `b`：即`back`, 

---

## 五、搜索，替换与视觉模式

* `/+内容`：命令行模式，**搜索内容**
* `:%s/旧/新/g`: **全局替换**
* `yw`：`yank a word`**复制单词**
* `p`：粘贴
* `ci{或者ci}`: `chang in `或者`clear in`把光标移动到括号内，**清空括号内容**
* `ctrl+v`：可视化块，`hjkl`移动， **选中块**，可以进行`d、y`等操作
* `shift+v`：可视化行，`hjkl`移动，**选中行**